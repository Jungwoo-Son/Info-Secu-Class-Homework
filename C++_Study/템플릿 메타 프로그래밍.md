# 템플릿 메타 프로그래밍

C++에서는 템플릿을 이용하여 제네릭 프로그래밍과 더불어 메타 프로그래밍이 가능하다

### 메타 프로그래밍이란 

메타 프로그래밍은 코드를 생성하는 코드를 만드는 프로그래밍이다
좀 더 자세히 설명한다면 파이썬이나 자바로 프로그래밍을 할때 특히 외부 라이브러리나 프레임워크를 이용할 때 어노테이션을 붙여서 몇가지 설정을 하거나 어노테이션을 붙이는 코드의 정보를 라이브러리에게 알릴때 사용할 때가 있다
이때 어노테이션은 그 역할에 따라 맞는 코드를 삽입해 준다
(예를 들어 웹 프레임워크에서는 라우터나 IP를 설정 등)



### C++에서의 메타 프로그래밍

C++ 템플릿의 인자값으로 타입만 넣을 수 있는 것은 아니다 값도 넣을 수 있는데 바로 이를 이용해 메타 프로그래밍이 가능해진다

```C++
#include <iostream>

template <unsigned int N>
struct Factorial {
  static const int result = N * Factorial<N - 1>::result;
};
template <>
struct Factorial<1> {
    static const int result = 1;
}

int main() {
    std::cout << "6! = " << Factorial<6>::result << std::endl;
}
```

위의 코드는 메타 프로그래밍을 이용하여 팩토리얼을 구현해 본 것이다 코드를 보면 템플릿 메타 프로그래밍으로 사용한 것이 몇가지 연산도 함을 알 수 있다
main 함수 안에서 Factorial<6>::result는 컴파일 단계에서 모두 연산을 끝 마친뒤 720이라는 코드를 생성할 것이다

이렇게 메타 프로그래밍을 사용하며 복잡한 코드를 간단한 API를 사용하여 컴파일 단계에서 생성하므로 사용자에게 보다 좋은 API를 제공할 수 있다
또 컴파일 단계에서 연산 가능한 것들을 처리함으로서 런타임에서 보다 나은 성능을 얻을 수 있다