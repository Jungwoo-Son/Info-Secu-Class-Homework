# 동시성과 병렬성

프로그램이 동시에 여러가지를 처리할 경우에 대한 방법으로 여러가지가 존재합니다

이에 대해서 공부를 하다보면 다소 혼란스러운데 비슷해 보이는 동시성과 병렬성이라는 개념과 함께 멀티 프로세스, 멀티 스레드, 비동기, 코루틴 등의 기법이 존재합니다

모두 비슷해 보이고 같은 문제를 해결하지만 엄밀하게 다르고 각자의 특징이 존재합니다

---



## 동시성

동시성은 작업들을 처리하는 것에대한 특성으로 동시에 여러 작업이 처리 될 수 있음을 의미합니다

연산이 가능한 물리적 스레드가 여러개라면 여러 작업이 한 번에 처리될 수 있지만 연산 가능한 물리적 스레드가 한 개일 경우 이 작업을 조금 하고 저 작업을 조금 하고 하는 방식(시분할 혹은 라운드 로빈 방식)으로 동시성을 가질 수 있습니다

동시성을 만족한다고해서 병렬성을 만족하는 것은 아닙니다

## 병렬성

병렬성은 작업들을 처리하는 방법으로 한 번에 여러 작업을 처리하는 것을 의미합니다

물리적으로 연산이 가능한 여러개의 장치(스레드, 코어,  CUDA스트림 등)활용하여 작업을 처리합니다

병렬성을 만족한다면 동시성도 만족합니다



## 동시성을 구현하는 법

동시성을 구현하는 법에는 여러가지 방법이 존재합니다
각각의 방법은 병렬성을 띌 수도 있고 아닐 수도 있습니다
이에 대한 정확한 정보는 각 방법을 구현한 라이브러리나 언어의 레퍼런스를 참조해야 합니다

- 멀티 스레드
- 멀티 프로세스
- 비동기(async)
- 코루틴
  

### 멀티 스레드

멀티 스레드는 물리적으로 연산을 담당하는 장치인 스레드(코어)를 여러개를 사용하는 방법입니다 따라서 해당 방식은 병렬성을 만족합니다

보통 운영체제에서 제공하는 방식으로 스레드를 생성하고 제거할 수 있습니다
다만 만약 실제 물리적 스레드 보다 많은 양의 멀티 스레드를 할당한 경우 각 물리적 스레드에 여러 스레드가 돌아가면서 시분할 또는 라운드 로빈같은 방식으로 동작합니다

스레드 마다 각각의 스택 공간을 가지고 힙을 비롯한 공간은 공유합니다

단 생성과 제거 그리고 스레드를 교체하는 과정에서 오버헤드가 발생합니다

각 스레드 마다 공유된 공간을 동시에 접근하는 경우(race condition) 그리고 이를 막기 위해 서로 기다리다가 엉켜서 서로가 서로를 기다리는 경우(데드락) 등의 문제가 발생하면서 복잡성늘고 안정성을 잃습니다